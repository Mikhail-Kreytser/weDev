
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

function checkEmail(){
  var email=document.getElementById( "email" ).value;
  if(email){
    $.ajax({
      url: '/check/email/'+email,
      success: function (response) {
        if (response == "taken"){
          var popup = document.getElementById("myPopupEmail");
          popup.classList.remove("show","hide");
          popup.classList.add("show");
        }
        else{
          var popup = document.getElementById("myPopupEmail");
          popup.classList.remove("show","hide");
          popup.classList.add("hide");
        }
      }
    });
  }
}
function checkUsername(){
  var username=document.getElementById( "username" ).value;
  if(username){
    $.ajax({
      url: '/check/username/'+username,
      success: function (response) {
        if (response == "taken"){
          var popup = document.getElementById("myPopupUsername");
          popup.classList.remove("show","hide");
          popup.classList.add("show");
        }
        else{
          var popup = document.getElementById("myPopupUsername");
          popup.classList.remove("show","hide");
          popup.classList.add("hide");
        }
      }
    });
  }
}


</script>


<header class="intro-header">
          <h3>Sign Up</h3>
          <span class="subheading">Join our Turk System!</span>
</header>

<div class="container">
          {{#if error}}
            <div id="card-alert" class="card red lighten-5">
              <div class="card-content red-text">
                <i class="mdi-alert-error"></i>
                <p><center>ERROR</center></p>
              </div>
            </div>
          {{/if}}
          {{#if usernameTaken}}
            <div id="card-alert" class="card red lighten-5">
              <div class="card-content red-text">
                <p><center>Username is taken. Please try again</center></p>
              </div>
            </div>
          {{/if}}

          {{#if emailTaken}}
            <div id="card-alert" class="card red lighten-5">
              <div class="card-content red-text">
                <p><center>Email is taken. Please try again.</center></p>
              </div>
            </div>
          {{/if}}


    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <form name="sign-up" action="/sign-up" method="post">

        <ul class="stepper horizontal">
         <li class="step active">
            <div class="step-title waves-effect">Username</div>
            <div class="step-content">
               <div class="row">
                 <div style="text-align:center" > 
                  <div class ="popup" style=" bottom: 100%;">
                      <span class="popuptext" id="myPopupUsername">Username Taken</span>
                  </div>
                </div>
                  <div class="input-field col s12 ">
                     <input id="username" name="username" onkeyup="checkUsername()" data-error="taken" type="text" class="validate" autofocus required>
                     <label for="username">Username</label>
                  </div>
                  <div class="row">        
                    <p class="center-align">
                      <input name="accountType" checked type="radio" id="Customer" value="Customer" class="required"/>
                      <label for="Customer">Customer</label>
                      <input name="accountType" type="radio" id="Developer" value="Developer"/>
                      <label for="Developer">Developer</label>
                    </p>
                  </div>
               </div>
               <div class="step-actions">
                  <button class="waves-effect waves-dark btn next-step brown lighten-1" >CONTINUE</button>
               </div>
            </div>
         </li>
         <li class="step">
            <div class="step-title waves-effect">Password</div>
            <div class="step-content">
               <div class="row">
                  <div class="input-field col s12">
                     <input id="password" name="password" type="password" class="validate" required>
                     <label for="password">Your password</label>
                  </div>
               </div>
               <div class="step-actions">
                  <button class="waves-effect waves-dark btn next-step brown lighten-1">CONTINUE</button>
                  <button class="waves-effect waves-dark btn-flat previous-step">BACK</button>
               </div>
            </div>
         </li>
         <li class="step">
            <div class="step-title waves-effect">E-mail</div>
              <div class="step-content">
               <div class="row">
                <div style="text-align:center" > 
                  <div class ="popup" >
                      <span class="popuptext" id="myPopupEmail">Email Taken</span>
                  </div>
                </div>
                  <div class="input-field col s12">
                     <input id="email" name="email" onkeyup="checkEmail()" type="email" class="validate" required>
                     <label for="email">Your E-mail</label>
              
                  </div>
               </div>

               <div class="step-actions">
                  <button class="waves-effect waves-dark btn brown lighten-1" type="submit">Register</button>
               </div>
            </div>
         </li>
        </ul>
      </form>
    </div>
  </div>
</div>
